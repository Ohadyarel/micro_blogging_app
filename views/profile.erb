<div id="profile">

	<div id="profile_title">
		<h1>
			<%= @profile_user[:username] %>
		</h1>
		<p>
			<%= "#{@profile_user[:fname]} #{@profile_user[:lname]}" %>
		</p>
	</div>

	<% if @current_user[:id] == @profile_user[:id] %>
		<div id="edit_profile_button">
			<a href=<%= "/profile_edit/#{@current_user.username}" %>>Edit profile</a>
		</div>
	<% else %>
		<% if Follow.where(follower_id: @current_user[:id], followed_id: @profile_user[:id]).first %>			
 			<% @current_follow = Follow.where(follower_id: @current_user[:id], followed_id: @profile_user[:id]).first %>
			<div id="unfollow_button">
				<form method="POST" action="/unfollow">
					<input type="hidden" name="profile_username" value=<%= @profile_user.username %>>
					<input type="hidden" name="follow_id" value=<%= @current_follow.id %>>
					<input type="submit" value="Unfollow <%=@profile_user[:username] %>"></input>
				</form>
			</div>
		<% else %>
			<div id="follow_button">
				<form method="POST" action="/follow">
					<input type="hidden" name="profile_id" value=<%= @profile_user.id %>>
					<input type="hidden" name="profile_username" value=<%= @profile_user.username %>>
					<input type="submit" value="Follow <%=@profile_user[:username] %>"></input>
				</form>
			</div>

		<% end %>
	<% end %>
	<div id="profile_main">
		<div id="profile_main_nav">
			<ul>
				<li class="active_profile_tab">Posts</li>
				<li>Following</li>
				<li>Followers</li>
			</ul>
		</div>
		<div id="profile_posts">
			<% @profile_user_posts.reverse.each do |post| %>
        <div class="profile_post">
            <p class="post_body">
                <%= post[:body] %>
            </p>
            <p class="post_creator">
                <%= @profile_user[:username] %>
            </p>
         		<p class="post_time">
              <%= post[:created_at] %> 
            </p>
        </div>
    <% end %>
		</div>
		<div id="profile_following">
			<div class="profile_following">
					<% @profile_user_follow = Follow.where(follower_id: @profile_user[:id]) %>
					<% @profile_user_follow.each do |follow| %>
						<div id="people_user_follows">
							<%= User.where(id: follow[:followed_id]).first.username %>
						</div>
					<% end %>
			</div>
		</div>
		<div id="profile_followers">
			<div class="profile_followers">
					<% @profile_user_followers = Follow.where(followed_id: @profile_user[:id]) %>
					<% @profile_user_followers.each do |follow| %>
						<div id="people_user_follows">
							<%= User.where(id: follow[:follower_id]).first.username %>
						</div>
					<% end %>
			</div>
		</div>
	</div>

</div>